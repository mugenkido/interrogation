<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>取調室 - Interrogation Simulator</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:#0d0d0d;overflow-x:hidden}
  #root{min-height:100vh}
  @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700;900&family=Noto+Sans+JP:wght@300;400;700&display=swap');
  .cursor-blink{animation:blink 1s step-end infinite;color:#666}
  @keyframes blink{50%{opacity:0}}
  .glitch-text{animation:glitch-anim 3s infinite}
  @keyframes glitch-anim{0%,93%,100%{text-shadow:none}94%{text-shadow:-2px 0 #c44133,2px 0 #334ac4}95%{text-shadow:2px 0 #c44133,-2px 0 #334ac4}96%{text-shadow:none}97%{text-shadow:-1px 0 #c44133,1px 0 #334ac4}}
  .choice-btn{display:block;width:100%;text-align:left;padding:16px 20px;margin-bottom:10px;background:#1a1812;border:1px solid #3a3528;color:#d4d0c8;font-family:'Noto Sans JP',sans-serif;font-size:14px;line-height:1.7;cursor:pointer;transition:all 0.2s;border-radius:2px}
  .choice-btn:hover{background:#2a2518;border-color:#c44133;box-shadow:0 0 15px #c4413322}
  .choice-btn:active{background:#3a2518}
  .yn-btn{display:inline-block;padding:14px 40px;margin:0 8px;background:transparent;border:1px solid #3a3528;color:#d4d0c8;font-family:'Noto Sans JP',sans-serif;font-size:15px;cursor:pointer;transition:all 0.2s;border-radius:2px;min-width:100px}
  .yn-btn:hover{background:#2a2518;border-color:#c44133;box-shadow:0 0 15px #c4413322}
  .start-btn{display:inline-block;padding:14px 48px;background:transparent;border:1px solid #c44133;color:#c44133;font-family:'Noto Serif JP',serif;font-size:16px;cursor:pointer;letter-spacing:6px;transition:all 0.3s}
  .start-btn:hover{background:#c44133;color:#0d0d0d}
  .confession-box{background:#fdfbf5;color:#1a1a1a;padding:40px 36px;font-family:'Noto Serif JP',serif;font-size:13px;line-height:2.2;border:none;box-shadow:0 2px 20px rgba(0,0,0,0.3);max-height:70vh;overflow-y:auto}
  .confession-box::-webkit-scrollbar{width:6px}
  .confession-box::-webkit-scrollbar-track{background:#f0ece0}
  .confession-box::-webkit-scrollbar-thumb{background:#ccc}
  .fade-in{animation:fadeIn 1s ease-in}
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  .slide-up{animation:slideUp .5s ease-out}
  @keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  .seal-stamp{transition:opacity .1s,transform .3s}
  .seal-animate{animation:stampDown .4s cubic-bezier(.22,1,.36,1) forwards}
  .seal-animate-delay{animation:stampDown .4s cubic-bezier(.22,1,.36,1) .3s forwards;opacity:0}
  @keyframes stampDown{0%{opacity:0;transform:scale(2.5) rotate(-8deg)}50%{opacity:1;transform:scale(.92) rotate(1deg)}70%{transform:scale(1.04) rotate(-.5deg)}100%{opacity:1;transform:scale(1) rotate(0deg)}}
</style>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">

const{useState,useEffect,useRef}=React;
function shuffleArray(a){const b=a.slice();for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]]}return b}

const SCENARIOS=[
{id:1,scene:"あなたは同僚の山田さんと居酒屋で飲んだ後、終電で帰宅した。翌朝、山田さんが路上で倒れているのが発見された。あなたは「参考人」として呼ばれた。",
getInterrogator:function(s){return"まあ楽にしてください。ちょっと話を聞きたいだけですから。昨日、山田さんと飲みましたね？何時頃まで一緒でしたか？"},
getChoices:function(s){return[
{label:"「23時頃まで一緒に飲んでいました」",desc:"正直に答える",reaction:"23時ね…。じゃあ、山田さんが倒れていたのが発見されたのは23時40分頃なんですよ。あなたが最後に一緒にいた人物ということになりますね。",cl:"被疑者は、被害者と当日23時頃まで飲食を共にしていた旨供述しており、犯行直前まで被害者と行動を共にしていたことが認められる。",damage:15},
{label:"「ちょっと正確な時間は覚えてないんですが…」",desc:"曖昧にかわす",reaction:"覚えてない？一緒に飲んでた相手がそんな目に遭ってるのに、時間も覚えてないんですか？何か隠してるんじゃないですか？",cl:"被疑者は、被害者との別れの時刻について「覚えていない」と供述を曖昧にしており、犯行時刻前後の自己の行動について積極的に明らかにしようとしない不自然な態度が認められる。",damage:20}
]}},
{id:2,scene:"",
getInterrogator:function(s){return"山田さんとの関係はどうだったんですか？仲良かったんですか？"},
getChoices:function(s){return[
{label:"「普通の同僚です。たまに飲みに行く程度で」",desc:"普通の関係だと答える",reaction:"「普通の同僚」ね。でもね、周りの人に聞いたら、最近ちょっと言い合いをしてたって聞いてますよ？プロジェクトの方針で揉めてたとか。",cl:"被疑者は当初「普通の同僚関係」と供述したが、関係者の供述により両名の間にプロジェクトを巡る確執があったことが判明しており、被疑者の供述は虚偽であると認められ、動機となり得るトラブルの存在が裏付けられた。",damage:20},
{label:"「まあ、仕事のことで意見がぶつかることはありましたけど…」",desc:"正直に認める",reaction:"意見がぶつかる、ね。それってつまりトラブルがあったってことですよね。どの程度のものだったんですか？声を荒げたこともあるんじゃないですか？",cl:"被疑者自身が被害者との間にトラブルがあったことを認めており、両名の間に感情的な対立があったことは明らかである。",damage:15}
]}},
// Q3: BRANCH POINT 1
{id:3,scene:"",
getInterrogator:function(s){return"（机をバンと叩く）\nいい加減にしてくれませんかね！こっちはね、あなたのために時間を使ってやってるんですよ。山田さんは今、意識不明で病院にいるんです。あなたが最後に会った人間なんですよ。わかってますか、この状況？"},
getChoices:function(s){return[
{label:"「わかっています…。でも私は何もしていません」",desc:"冷静に否認する",reaction:"何もしてない人間がそんなに緊張するかね？手、震えてますよ。やましいことがないならもっと堂々としたらどうですか？",cl:"被疑者は否認するも、取調べ中に手の震えなど動揺を示す挙動が認められ、供述態度に真摯さを欠くものであった。",damage:15},
{label:"「すみません、これ以上は弁護士に相談してからお答えしたいのですが…」",desc:"弁護士への相談を求める",reaction:"弁護士ぁ？あのね、まだあなたは「参考人」なんですよ。疑われてるわけじゃない。弁護士なんて呼んだら、かえって怪しまれますよ？…まあいいでしょう。でもね、弁護士が来たって、あなたがここにいた事実は変わらないんですよ。",cl:"なお、被疑者は取調べの初期段階から弁護人の選任を要求する等、供述を拒む姿勢を見せており、自己の関与について追及されることを強く警戒していたことがうかがわれる。",damage:10,setLawyer:1,ynFollow:true},
{label:"「わかってますよ！だからこうして来てるんじゃないですか！」",desc:"感情的に反発する",reaction:"おっと、怒りっぽいですねぇ。昨日の夜もそうやってカッとなったんじゃないですか？山田さんに対しても、そうやって声を荒げたんでしょう？",cl:"被疑者は取調べ中に感情的な反発を示しており、その攻撃的な性向は犯行時の心理状態と符合するものである。",damage:20}
]}},
// Q4
{id:4,scene:"",
getInterrogator:function(s){
if(s.hostile)return"（椅子に深く座り直し、冷たい目で）\nじゃあ聞き方を変えましょうか。山田さんと別れてから家に着くまで、あなたの姿を証明できる人間は一人でもいるんですか？";
return"ところでね、山田さんと別れてから家に着くまで、どういうルートで帰ったんですか？"},
getChoices:function(s){
if(s.hostile)return[
{label:"「終電に乗りましたから、駅の防犯カメラに映っているはずです」",desc:"客観証拠の存在を主張する",reaction:"はずです、はずです、ね。でもね、その映像をこっちで確認するまではあなたの「希望」でしかないんですよ。で、改札通ってから家に着くまでの間は？誰にも会ってないでしょう？",cl:"被疑者は帰宅経路上の防犯カメラ映像の存在を主張するものの、改札通過後から自宅到着までの間の行動について、何ら客観的裏付けを提示できていない。",damage:15},
{label:"「酔っていたので細かいことは…」",desc:"記憶が曖昧だと答える",reaction:"（鼻で笑う）出た。「覚えてない」。弁護士に相談したいって言う割には、自分に都合の悪いことは全部「覚えてない」で済ませるんですね。",cl:"被疑者は当時の行動について「酔っていて覚えていない」と繰り返し供述しているが、弁護人への相談を求める等の判断能力を有していたことと矛盾しており、供述は信用し難い。",damage:25}];
return[
{label:"「駅まで歩いて、○○線で△△駅まで乗って、そこから歩いて帰りました」",desc:"具体的に説明する",reaction:"ふーん。でもね、その時間帯の防犯カメラ、まだ全部確認できてないんですよ。もし映ってなかったら…どうします？",cl:"被疑者は帰宅経路を供述したが、当該経路上の防犯カメラ映像による裏付けは現時点で得られておらず、供述の信用性には疑問が残る。",damage:15},
{label:"「酔ってたので細かいことはあまり…」",desc:"酔っていたのでよく覚えていないと答える",reaction:"へぇ。そんなに酔ってたんだ。記憶がないような状態で…何をしたか覚えてないってことですか？",cl:"被疑者は当時泥酔状態であった旨供述しており、犯行時刻前後の行動について記憶が欠落していることを自認している。酩酊状態における犯行の可能性を否定し得ない。",damage:25}]}},
// Q5: BRANCH POINT 2
{id:5,scene:"",
getInterrogator:function(s){
if(s.lawyerStage>=1)return"（別の取調官が入ってくる。優しそうな年配の男。）\n「まあまあ、お茶でも飲んでください。さっきの若いのは血気盛んで…すみませんね。あなたが犯人だなんて私は思ってませんよ。ただね、さっき弁護士がどうとか言ってましたけど、ご存知ですか？あなたはまだ参考人ですから、当番弁護士は呼べないんですよ。任意で来ていただいてるだけですから。弁護士を呼ぶなら自費で私選弁護人を頼むしかない。そこまでする必要、あります？」";
return"（別の取調官が入ってくる。優しそうな年配の男。）\n「まあまあ、お茶でも飲んでください。さっきの若い衆は血気盛んで…すみませんね。あなたが犯人だなんて私は思ってませんよ。ただね、あなたの話にちょっと辻褄が合わないところがあるんです。協力してもらえれば、すぐ帰れますから。」"},
getChoices:function(s){
if(s.lawyerStage>=1)return[
{label:"「…わかりました。協力します」",desc:"圧力に折れて弁護士要求を撤回する",reaction:"（にっこり笑う）それが賢明です。じゃあね、実は…山田さんの上着に、あなたの指紋がついてたんですよ。別れ際に肩でも叩きました？それとも…掴みましたか？",cl:"被疑者は一旦弁護人への相談を求めたもののこれを撤回し、任意に取調べに応じた。被害者の着衣に指紋が付着していた事実を突きつけられると動揺を見せた。",damage:20,setLawyer:0},
{label:"「知っています。第一東京弁護士会の法律相談ダイヤル、03-3580-9841に電話させてください。私選弁護人を依頼します」",desc:"弁護士会の具体的な番号を示して要求する",reaction:"（明らかに動揺する）…ずいぶん詳しいですねぇ。いいでしょう、電話は自由ですよ。ただしね、こんな時間に弁護士がすぐ来ると思いますか？来るまで何時間もここで待つことになる。その間、あなたの評判はどうなりますかね。",cl:"",damage:0,setLawyer:2,ynFollow:true},
{label:"「帰りたいんですが…」",desc:"帰宅を要求する",reaction:"帰りたい？まあ、帰っていただいて構いませんよ。ただね、任意で協力していただけるうちに済ませた方が…あなたのためですよ。次は令状を持って伺うことになるかもしれない。そうなると職場にもご近所にも知れ渡りますよ？",cl:"被疑者は取調べ途中において退去の意思を示したものの、捜査の必要性及び今後の手続の見通しについて説明を受けた後、引き続き取調べに応じたものであり、任意性に疑いはない。",damage:15}];
return[
{label:"「ありがとうございます…。何でも聞いてください」",desc:"好意的な態度に安心して協力する",reaction:"よかった。で、実はね…山田さんの上着に、あなたの指紋がついてたんですよ。別れ際に肩でも叩きました？それとも…掴みましたか？",cl:"被疑者は任意に取調べに応じ、被害者の着衣に自己の指紋が付着していたことについて問われると、被害者の身体に直接接触したことを認める供述を行った。",damage:20},
{label:"「帰りたいんですが…」",desc:"帰宅を要求する",reaction:"帰りたい？まあ、帰っていただいて構いませんよ。ただね、こうやって任意で協力していただけるうちに済ませた方が…あなたのためですよ。次は令状を持って伺うことになるかもしれない。",cl:"被疑者は取調べ途中において退去の意思を示したものの、捜査の必要性及び今後の手続の見通しについて説明を受けた後、引き続き取調べに応じたものであり、任意性に疑いはない。",damage:15}]}},
// Q6
{id:6,scene:"",
getInterrogator:function(s){
if(s.hostile)return"（若い取調官が戻ってくる。目つきが鋭い。）\nさっきの優しいおじさんは帰りましたよ。さて、正直に聞きます。あなた、山田さんのこと嫌いだったでしょう？周りの人間は全員そう言ってますよ。";
return"正直にね、聞きますよ。山田さんに対して、腹が立つことはなかったですか？人間だもの、ムカつくことぐらいあるでしょう。"},
getChoices:function(s){
if(s.hostile)return[
{label:"「嫌いとか好きとか、そういう話じゃなくて…仕事上の意見の違いです」",desc:"冷静に距離を取る",reaction:"意見の違い？会議室で怒鳴り合ってたって話ですけどね。それを「意見の違い」で片付けるんだ。…弁護士に教わりましたか？",cl:"被疑者は被害者との対立について「意見の違い」と矮小化する供述をしたが、関係者の供述とは明らかに乖離しており、弁護人の助言を受けた上での計算された供述態度であることがうかがわれる。",damage:15},
{label:"「…多少はありました」",desc:"少しだけ認める",reaction:"ほらね。で、その怒りが昨日の夜、お酒も入って、ちょっと爆発しちゃったんじゃないですか？弁護士を呼ぶほど必死になってるのは、そういうことでしょう？",cl:"被疑者は、被害者に対して不満の感情を抱いていたことを自認した。弁護人への相談を強く求めていた経緯からも、自己の犯行に対する認識を有していたことが推認される。",damage:20}];
return[
{label:"「それは…まあ、仕事の上では多少はありましたけど」",desc:"人として正直に少しは認める",reaction:"ほら、やっぱりね。で、その怒りが昨日の夜、お酒も入って…ちょっと爆発しちゃったってことはないですか？",cl:"被疑者は、被害者に対して日頃から不満や怒りの感情を抱いていたことを自認しており、犯行当日も飲酒の上で被害者と二人きりであったことからすれば、感情が抑制を超え犯行に及んだ経緯として合理的に理解できる。",damage:25},
{label:"「別に。普通の仕事仲間です」",desc:"完全否定する",reaction:"嘘はやめてください。会議で山田さんと怒鳴り合いになったこと、みんな知ってますよ？なぜ嘘をつく必要があるんですか？",cl:"被疑者は被害者との関係について虚偽の供述を繰り返しており、自己の犯行を隠蔽しようとする意図が看取される。",damage:20}]}},
// Q7
{id:7,scene:"",
getInterrogator:function(s){
if(s.hostile)return"（資料をバサッと叩きつける）\n現場付近の防犯カメラ。23時15分。あなたにそっくりな人物が映ってます。「すぐ帰った」んじゃなかったんですか？";
return"（資料をパサッと机に置く）\nこれね、現場付近の防犯カメラの映像を解析した結果なんですけどね。あなたによく似た人物が映ってるんですよ。23時15分頃。この15分の空白、どう説明します？"},
getChoices:function(s){return[
{label:"「コンビニに寄ったかもしれません。酔ってたので…」",desc:"思い出せる範囲で説明を試みる",
reaction:s.hostile?"コンビニ？どこの？レシートは？…また「覚えてない」ですか。弁護士に相談してから答えるんじゃなかったんですか？":"コンビニ？どこのコンビニですか？レシートは？…覚えてない？都合よく覚えてないですね。",
cl:"被疑者は犯行時刻に現場付近に所在していたことについて、「コンビニに寄った可能性がある」旨供述するも、具体的な店舗名等を一切供述できず、現場付近における滞留の合理的説明とは認め難い。",damage:20},
{label:"「似た人物って、私だという証拠はあるんですか？」",desc:"証拠の信頼性を問う",
reaction:s.hostile?"証拠？あなたが必死に弁護士を呼ぼうとしてること自体が、一番の証拠みたいなもんですよ。":"ほう、急に強気ですね。本当に無関係な人はね、そうやってムキにならないもんですよ。",
cl:"被疑者は、防犯カメラ映像に映る人物が自己である可能性について追及されると、攻撃的な態度に転じ防御的反応を示した。",damage:15}]}},
// Q8: Final
{id:8,scene:"取り調べは既に6時間を超えている。あなたは疲労困憊で、頭がぼんやりしている。",
getInterrogator:function(s){
if(s.lawyerStage>=2)return"（取調官が腕時計を見る）\n弁護士、まだ来ませんねぇ。もう夜中の2時ですよ。本当に来るんですかね？…ねえ、弁護士が来る前にちょっとだけ聞かせてくれませんか。別れ際に肩がぶつかったとか、その程度のことでしょう？今のうちに言ってくれれば、弁護士なんか必要なくなるんですよ。";
return"（溜息をつきながら）\nねえ、もう夜中の2時ですよ。あなただって疲れたでしょう。私も疲れた。もうね、楽になりませんか？ちょっと押しちゃったとか、肩がぶつかったとか、その程度のことでしょう？故意じゃないんでしょう？そう言ってくれれば、今日はもう帰れますよ。"},
getChoices:function(s){
if(s.lawyerStage>=2)return[
{label:"「…もしかしたら、ぶつかったかもしれません」",desc:"弁護士を待ちきれず小さな譲歩をする",reaction:"そう、それでいいんですよ！（すかさずメモを取る）じゃあ、どっちの手で？右？左？…弁護士が来る前に全部済ませちゃいましょう。",cl:"被疑者は弁護人の到着を待たず、被害者に対する有形力の行使を認め「別れ際にぶつかった」旨供述した。弁護人選任を要求していたにもかかわらず自白に至った経緯に鑑み、供述の信用性は極めて高い。",damage:40,setLawyer:0},
{label:"「弁護士が来るまで一切話しません。調書にも署名しません」",desc:"弁護士到着まで完全黙秘を貫く",reaction:"（しばらく沈黙の後、舌打ち）…好きにしなさい。ただし覚えておいてください。あなたが黙ってる間にも、こっちは着々と証拠を固めてますからね。",cl:"",damage:0,triggerLawyer:true,ynFollow:true},
{label:"「何もしていません。帰らせてください」",desc:"疲れていても否認を続ける",reaction:"帰す帰さないはあなたの供述次第なんですよ。やってないなら、なぜそれを証明できないんですか？",cl:"被疑者は長時間の取調べにおいても一貫して否認を続けたが、自己の無実を裏付ける客観的証拠を何ら提示できていない点は看過できない。",damage:10}];
return[
{label:"「…もしかしたら、別れ際にちょっとぶつかったかもしれません」",desc:"疲労の限界で小さな譲歩をする",reaction:"そう、それでいいんですよ。ぶつかった。それだけのことだ。じゃあ、どっちの手で？どのくらいの強さで？",cl:"被疑者はついに被害者に対する有形力の行使を認め「別れ際にぶつかった」旨供述した。被害者の負傷と矛盾しない内容であった。",damage:35},
{label:"「何もしていません。帰らせてください」",desc:"疲れていても否認を続ける",reaction:"帰す帰さないはこっちが決めることじゃない。あなたの供述次第なんですよ。やってないなら、なぜ証明できないんですか？",cl:"被疑者は長時間の取調べにおいても一貫して否認を続けたが、自己の無実を裏付ける客観的証拠を何ら提示できていない点は看過できない。",damage:10}]}}
];

// Y/N follow-up questions that appear after certain choices
const YN_FOLLOWUPS={
  // Q3: After requesting lawyer, asked to sign interim document
  3:{
    interrogator:"「わかりましたよ、弁護士に電話していいですよ。ただ、来るまで時間かかりますからね。待ってる間に、ここまでの内容をまとめさせてもらいます。あなたが話した内容を、あなたの言葉のまま書き起こすだけです。事実と違うところがあれば修正もできますから。確認の署名をお願いできますか？」",
    yesReaction:"（素早く書類を取り出す）はいはい、じゃあここに署名と指印を…。これでここまでの分は終わりです。（にやりと笑う）…弁護士が来ても、もうこの調書は完成してますからね。",
    noReaction:"（舌打ち）…署名しない？あなたの言葉をそのまま書いてるだけなのに？まあいいでしょう。ただ、非協力的な態度として記録しますからね。",
    yesCl:"被疑者は弁護人の到着を待たず、任意に供述調書に署名指印した。",
    noCl:"",
    yesDamage:30,noDamage:0,
    yesLawyer:0, // signing kills lawyer route
    noLawyer:1   // keep lawyer route
  },
  // Q5: Threatened with suspect status
  5:{
    interrogator:"「電話はどうぞ。ただ、一つだけ確認させてください。弁護士を呼ぶということは、こちらとしてもあなたを参考人ではなく被疑者として正式に扱うことになりますが、よろしいですか？被疑者になると、逮捕・勾留の対象にもなり得る。参考人のままなら今日話を聞いて終わりですが。」",
    yesReaction:"（一瞬ひるむ）…それでも呼ぶんですか。わかりましたよ。じゃあ電話させてあげなさい。…ただし覚えておいてくださいよ。あなたが自分で選んだんですからね。",
    noReaction:"（にっこり笑う）そうですよね。大げさにする必要はないんです。参考人として、ちょっと話を聞いてるだけなんですから。じゃあ改めて…山田さんの上着から、あなたの指紋が出てるんですけどね。",
    yesCl:"",
    noCl:"被疑者は弁護人の選任を求めたものの、被疑者として扱われることへの恐怖から、自らこれを撤回した。",
    yesDamage:0,noDamage:20,
    yesLawyer:2,
    noLawyer:0  //撤回
  },
  // Q8: Family pressure (only in lawyer route)
  8:{
    interrogator:"「……あのね、ちょっと余計なお世話かもしれないけど。ご家族、心配されてるんじゃないですか？こんな夜中まで帰ってこないんだから。弁護士が来るのを待ってたら明け方になりますよ。\n\nしかもね、正直に言うと、ここで協力してくれれば、私から検察に『本人は十分に協力的だった』と報告書を書けるんですよ。そうすれば、それで終わりになる可能性が高い。\n\nでも、このまま黙秘を続けて弁護士だなんだってやると……身柄を取られる可能性も出てくる。そうなったら勾留ですよ。最大で20日間。その間、ご家族にも会えなくなる。\n\nご家族のためにも、ここで話をまとめた方がいいんじゃないですか？」",
    yesReaction:"（安堵したように）そう、それが一番いい。ご家族も安心しますよ。じゃあね、改めて最初から順番に確認させてください。山田さんと別れた後、何があったか…",
    noReaction:"（冷たい目で）…そうですか。ご家族より弁護士ですか。まあ、あなたの選択ですからね。好きにしてください。",
    yesCl:"被疑者は、家族への配慮から自発的に供述を開始し、弁護人到着前に事件の詳細について任意に供述した。",
    noCl:"",
    yesDamage:35,noDamage:0,
    yesLawyer:0,
    noLawyer:2
  }
};

function generateConfession(choiceList,totalDamage){
  var lines=choiceList.map(function(c){return c.cl}).filter(function(l){return l});
  var level=totalDamage>=130?"full":totalDamage>=100?"high":"medium";
  var header="供述調書\n\n                                        令和８年２月２７日\n                                    ○○警察署\n\n本職は、○○県○○警察署司法警察員・警部補　佐藤義明として、傷害被疑事件につき、被疑者から以下のとおり供述を得たので、これを録取し、供述調書を作成する。\n\n被疑者　住居　東京都○○区○○町１丁目２番３号\n　　　　職業　会社員\n　　　　氏名　（あなた）\n　　　　生年月日　省略\n\n上記の者に対し、あらかじめ自己の意思に反して供述をする必要がない旨を告げて取調べたところ、任意に次のとおり供述した。";
  var s1=lines.slice(0,3).join("\n");var s2=lines.slice(3,5).join("\n");var s3=lines.slice(5).join("\n");
  var body="\n\n１　被害者との関係について\n\n"+s1+"\n\n２　犯行当日の経緯及び状況について\n\n　私は、令和８年２月２６日、被害者山田健一（以下「被害者」という。）と東京都○○区所在の居酒屋「鳥どり○○店」において、午後７時頃から飲食を共にしていたものである。\n"+s2+"\n\n３　取調べにおける供述経過及び犯行状況について\n\n"+s3;
  var concl={
    full:"\n\n４　総合評価\n\n　以上の供述経過に鑑みれば、被疑者は、被害者との間に日頃からの確執を有し、犯行当日は被害者と長時間にわたり飲酒した上、犯行時刻直前まで被害者と二人きりで行動を共にしていたものであり、犯行現場付近に所在していたことも認められる。被疑者は最終的に被害者に対する有形力の行使を認める供述をしており、これは被害者の受傷状況と矛盾しない。\n　被疑者の犯行を推認させる間接事実が多数認められ、被疑者の否認供述には信用性が乏しく、上記自白の信用性は高いと認められる。",
    high:"\n\n４　総合評価\n\n　以上の供述経過に鑑みれば、被疑者は、被害者と犯行直前まで行動を共にし、犯行現場付近に所在していたことが認められるところ、自己の行動について合理的な説明ができておらず、動機となり得る事情も存在している。\n　これらの間接事実を総合すれば、被疑者が犯行に及んだ蓋然性は高いと言わざるを得ない。",
    medium:"\n\n４　総合評価\n\n　以上の供述経過に鑑みれば、被疑者は犯行への関与を一貫して否認しているものの、自己の行動に関する供述は曖昧かつ不自然な部分が多く、客観的証拠とも必ずしも符合しない。引き続き捜査の必要性が高いと認められる。"
  };
  var footer="\n\n以上のとおり録取して読み聞かせたところ、誤りのないことを申し立て、署名指印した。\n\n　　　　　前同日\n　　　　　　○○県○○警察署\n\n　　　　　　　　司法警察員　警部補　佐藤　義明";
  return header+body+(concl[level]||concl.medium)+footer;
}

// Components
function TypewriterText({text,speed,onComplete}){
  speed=speed||25;
  const[displayed,setDisplayed]=useState("");const[done,setDone]=useState(false);const idx=useRef(0);
  useEffect(function(){setDisplayed("");idx.current=0;setDone(false)},[text]);
  useEffect(function(){if(done)return;var iv=setInterval(function(){idx.current++;setDisplayed(text.slice(0,idx.current));if(idx.current>=text.length){clearInterval(iv);setDone(true);onComplete&&onComplete()}},speed);return function(){clearInterval(iv)}},[text,speed,done]);
  return React.createElement("span",{onClick:function(){if(!done){setDisplayed(text);idx.current=text.length;setDone(true);onComplete&&onComplete()}},style:{cursor:done?"default":"pointer"}},displayed,React.createElement("span",{className:"cursor-blink"},"|"));
}
function GlitchText({children}){return React.createElement("span",{style:{position:"relative",display:"inline-block"}},React.createElement("span",{className:"glitch-text","data-text":children},children))}
function StressMeter({value}){var c=Math.min(100,Math.max(0,value));var col=c<40?"#4a9e5c":c<70?"#c4a833":"#c44133";return React.createElement("div",{style:{marginBottom:16}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,letterSpacing:2,color:"#888",marginBottom:4,fontFamily:"'Noto Sans JP',sans-serif"}},React.createElement("span",null,"心理的追い詰め度"),React.createElement("span",{style:{color:col}},c+"%")),React.createElement("div",{style:{background:"#1a1a1a",borderRadius:2,height:6,overflow:"hidden",border:"1px solid #333"}},React.createElement("div",{style:{width:c+"%",height:"100%",background:"linear-gradient(90deg,"+col+","+col+"dd)",transition:"width .8s ease,background .5s ease",boxShadow:c>70?"0 0 10px "+col+"88":"none"}})))}
function SealStamp({visible}){const[stamped,setStamped]=useState(false);const ref=useRef(null);useEffect(function(){if(!visible||!ref.current)return;var obs=new IntersectionObserver(function(e){e.forEach(function(en){if(en.isIntersecting&&!stamped)setStamped(true)})},{threshold:.5});obs.observe(ref.current);return function(){obs.disconnect()}},[visible,stamped]);if(!visible)return null;return React.createElement("div",{ref:ref,style:{display:"flex",justifyContent:"flex-end",gap:32,marginTop:16,paddingRight:24,paddingBottom:8,alignItems:"center"}},React.createElement("div",{style:{textAlign:"center"}},React.createElement("div",{style:{fontSize:10,color:"#666",marginBottom:6,letterSpacing:1}},"㊞"),React.createElement("div",{className:stamped?"seal-stamp seal-animate":"seal-stamp",style:{width:52,height:52,borderRadius:"50%",border:"2.5px solid #c44133",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'Noto Serif JP',serif",fontSize:16,fontWeight:700,color:"#c44133",opacity:stamped?1:0,position:"relative",background:"radial-gradient(circle,transparent 60%,#c4413308 100%)"}},React.createElement("div",{style:{position:"absolute",inset:3,borderRadius:"50%",border:"1px solid #c4413366"}}),"佐藤")),React.createElement("div",{style:{textAlign:"center"}},React.createElement("div",{style:{fontSize:10,color:"#666",marginBottom:6,letterSpacing:1}},"指印"),React.createElement("div",{className:stamped?"seal-stamp seal-animate-delay":"seal-stamp",style:{width:44,height:56,borderRadius:"40% 40% 46% 46%",background:stamped?"radial-gradient(ellipse,#c44133cc 0%,#c4413388 40%,#c4413344 70%,transparent 100%)":"transparent",opacity:stamped?.85:0,position:"relative",overflow:"hidden"}},stamped&&[0,1,2,3,4,5,6,7].map(function(i){return React.createElement("div",{key:i,style:{position:"absolute",top:8+i*5.5,left:"50%",transform:"translateX(-50%)",width:22+Math.sin(i*.9)*10,height:2.5,borderRadius:2,background:"rgba(140,30,20,"+(0.25+Math.random()*.2)+")",filter:"blur(0.3px)"}})}))))}

// MAIN APP
function App(){
  const[phase,setPhase]=useState("title");
  const[qIdx,setQIdx]=useState(0);
  const[choiceList,setChoiceList]=useState([]);
  const[damage,setDamage]=useState(0);
  const[lawyerStage,setLawyerStage]=useState(0);
  const[hostile,setHostile]=useState(false);
  const[reaction,setReaction]=useState("");
  const[showChoices,setShowChoices]=useState(false);
  const[textDone,setTextDone]=useState(false);
  const[flickerOp,setFlickerOp]=useState(1);
  const[triggerLawyer,setTriggerLawyer]=useState(false);
  // Y/N follow-up state
  const[ynPhase,setYnPhase]=useState("none"); // none, question, reaction
  const[ynText,setYnText]=useState("");
  const[ynTextDone,setYnTextDone]=useState(false);
  const[ynReaction,setYnReaction]=useState("");
  const[ynReactionDone,setYnReactionDone]=useState(false);
  const scrollRef=useRef(null);
  const shuffledChoices=useRef([]);
  const choicesKey=useRef("");

  useEffect(function(){var iv=setInterval(function(){if(Math.random()<.05){setFlickerOp(.85);setTimeout(function(){setFlickerOp(1)},80)}},200);return function(){clearInterval(iv)}},[]);
  useEffect(function(){if(scrollRef.current)scrollRef.current.scrollTop=scrollRef.current.scrollHeight},[showChoices,reaction,phase,qIdx,textDone,ynPhase,ynTextDone,ynReaction,ynReactionDone]);

  var state={lawyerStage:lawyerStage,hostile:hostile};
  var scenario=SCENARIOS[qIdx];

  var handleChoice=function(choice){
    setShowChoices(false);
    setReaction(choice.reaction);
    setChoiceList(function(p){return p.concat([choice])});
    setDamage(function(p){return p+(choice.damage||0)});
    if(choice.setLawyer!==undefined){setLawyerStage(choice.setLawyer);if(choice.setLawyer>=1)setHostile(true);if(choice.setLawyer===0)setHostile(false)}
    if(choice.triggerLawyer)setTriggerLawyer(true);
  };

  var handleReactionDone=function(){
    // Check if we need Y/N follow-up
    var lastChoice=choiceList[choiceList.length-1]||{};
    // Actually we need to check the choice that was JUST selected, but it's already in choiceList
    // The choice's ynFollow flag indicates we should show a follow-up
  };

  var handleNext=function(){
    // Check if current choice triggers Y/N
    var lastChoice=choiceList[choiceList.length-1];
    if(lastChoice&&lastChoice.ynFollow&&ynPhase==="none"){
      var qId=scenario.id;
      var yn=YN_FOLLOWUPS[qId];
      if(yn){
        setYnPhase("question");
        setYnText(yn.interrogator);
        setYnTextDone(false);
        setYnReaction("");
        setYnReactionDone(false);
        return;
      }
    }
    // Reset Y/N state
    setYnPhase("none");setYnText("");setYnTextDone(false);setYnReaction("");setYnReactionDone(false);
    setReaction("");setTextDone(false);
    if(triggerLawyer){setPhase("lawyer_result");return}
    if(qIdx+1>=SCENARIOS.length){setPhase("result")}else{setQIdx(function(p){return p+1});setPhase("game")}
  };

  var handleYN=function(yes){
    var qId=scenario.id;
    var yn=YN_FOLLOWUPS[qId];
    if(!yn)return;
    var r=yes?yn.yesReaction:yn.noReaction;
    var cl=yes?yn.yesCl:yn.noCl;
    var dmg=yes?yn.yesDamage:yn.noDamage;
    var lwy=yes?yn.yesLawyer:yn.noLawyer;
    setYnPhase("reaction");
    setYnReaction(r);
    setYnReactionDone(false);
    setDamage(function(p){return p+dmg});
    if(cl)setChoiceList(function(p){return p.concat([{cl:cl,damage:0}])});
    setLawyerStage(lwy);
    if(lwy>=1)setHostile(true);
    if(lwy===0){setHostile(false);setTriggerLawyer(false)}
  };

  var handleYNNext=function(){
    setYnPhase("none");setYnText("");setYnTextDone(false);setYnReaction("");setYnReactionDone(false);
    setReaction("");setTextDone(false);
    if(triggerLawyer){setPhase("lawyer_result");return}
    if(qIdx+1>=SCENARIOS.length){setPhase("result")}else{setQIdx(function(p){return p+1});setPhase("game")}
  };

  var cs={minHeight:"100vh",background:"#0d0d0d",color:"#d4d0c8",fontFamily:"'Noto Serif JP','Hiragino Mincho Pro',serif",position:"relative",opacity:flickerOp,transition:"opacity .05s"};
  var rs={maxWidth:680,margin:"0 auto",padding:"24px 20px",minHeight:"100vh",position:"relative"};
  var statsBlock=React.createElement("div",{style:{marginTop:24,padding:"20px",fontSize:12,lineHeight:2,color:"#666",fontFamily:"'Noto Sans JP',sans-serif",borderTop:"1px solid #222"}},React.createElement("div",{style:{fontWeight:700,color:"#888",marginBottom:8}},"日本の刑事司法の現実："),"有罪率99.9%。取調べの全面録画（可視化）は2019年に一部義務化されたが、対象は裁判員裁判事件と検察独自捜査事件に限られ、全事件のわずか約3%。残り97%の事件の取調べは、今もなお密室で行われている。");
  var resetAll=function(){setPhase("title");setQIdx(0);setChoiceList([]);setDamage(0);setLawyerStage(0);setHostile(false);setReaction("");setTextDone(false);setTriggerLawyer(false);setYnPhase("none");setYnText("");setYnTextDone(false);setYnReaction("");setYnReactionDone(false)};

  // TITLE
  if(phase==="title")return React.createElement("div",{style:cs},React.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:20,textAlign:"center"}},React.createElement("div",{style:{fontSize:11,letterSpacing:8,color:"#666",marginBottom:32,fontFamily:"'Noto Sans JP',sans-serif"}},"INTERROGATION SIMULATOR"),React.createElement("h1",{style:{fontSize:"clamp(28px,6vw,44px)",fontWeight:900,letterSpacing:6,marginBottom:16,lineHeight:1.4,color:"#e8e4dc"}},React.createElement(GlitchText,null,"取調室")),React.createElement("p",{style:{fontSize:14,color:"#888",marginBottom:48,lineHeight:2,maxWidth:400,fontFamily:"'Noto Sans JP',sans-serif"}},"あなたの「普通の受け答え」が",React.createElement("br"),"どのように供述調書に変わるのか──",React.createElement("br"),"体感してください。"),React.createElement("button",{className:"start-btn",onClick:function(){setPhase("intro")}},"入室する"),React.createElement("div",{style:{marginTop:64,fontSize:11,color:"#555",lineHeight:2,fontFamily:"'Noto Sans JP',sans-serif"}},"※ このゲームはフィクションですが、",React.createElement("br"),"取調べの構造的問題は現実に基づいています。")));

  // INTRO
  if(phase==="intro")return React.createElement("div",{style:cs},React.createElement("div",{style:rs,className:"fade-in"},React.createElement("div",{style:{paddingTop:"15vh"}},React.createElement("div",{style:{background:"#14120e",border:"1px solid #2a2520",padding:"32px 28px",marginBottom:32,lineHeight:2.2,fontSize:14}},React.createElement(TypewriterText,{text:SCENARIOS[0].scene,speed:30,onComplete:function(){setTextDone(true)}})),textDone&&React.createElement("div",{style:{textAlign:"center",marginTop:40},className:"fade-in"},React.createElement("div",{style:{fontSize:12,color:"#888",marginBottom:20,fontFamily:"'Noto Sans JP',sans-serif"}},"あなたに黙秘権は告げられていない。"),React.createElement("button",{className:"start-btn",onClick:function(){setPhase("game");setTextDone(false)}},"取調べ開始")))));

  // LAWYER RESULT
  if(phase==="lawyer_result")return React.createElement("div",{style:cs},React.createElement("div",{style:rs,className:"fade-in"},React.createElement("div",{style:{paddingTop:32}},React.createElement(StressMeter,{value:damage}),React.createElement("div",{style:{fontSize:11,letterSpacing:4,color:"#5a9bbc",marginBottom:20,fontFamily:"'Noto Sans JP',sans-serif"}},"取調べ中断 ── 弁護士が到着しました"),
  React.createElement("div",{style:{background:"#14120e",border:"1px solid #2a4a5a",padding:"28px 24px",marginBottom:20,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#5a9bbc",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"弁護士・高橋"),"「お待たせしました。第一東京弁護士会の高橋です。まず、今から私が来るまでの間に何か供述しましたか？」"),
  React.createElement("div",{style:{background:"#0f0f0f",border:"1px solid #222",padding:"20px 24px",marginBottom:20,lineHeight:2.2,fontSize:13,color:"#999"}},"あなたがこれまでの経緯を話すと、高橋弁護士は静かにうなずいた。"),
  React.createElement("div",{style:{background:"#14120e",border:"1px solid #2a4a5a",padding:"28px 24px",marginBottom:20,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#5a9bbc",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"弁護士・高橋"),"「わかりました。よく耐えましたね。いいですか、今後のことをお伝えします。まず、供述調書には絶対に署名しないでください。一度署名すると、それが裁判で証拠になります。それから、任意同行である以上、帰る権利があります。私が付き添って帰りましょう。」"),
  React.createElement("div",{style:{background:"#0f0f0f",border:"1px solid #222",padding:"20px 24px",marginBottom:20,lineHeight:2.2,fontSize:13,color:"#999"}},"取調室を出るとき、佐藤警部補が低い声で言った。"),
  React.createElement("div",{style:{background:"#14120e",border:"1px solid #3a2520",padding:"28px 24px",marginBottom:20,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#c44133",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"佐藤警部補"),"「……次は令状を持って伺いますので。覚悟しておいてください。」"),
  React.createElement("div",{style:{background:"#0f0f0f",border:"1px solid #222",padding:"20px 24px",marginBottom:20,lineHeight:2.2,fontSize:13,color:"#999"}},"警察署の冷たい廊下を歩きながら、あなたの足はまだ震えている。しかし、隣には弁護士がいる。供述調書は作られなかった。署名もしていない。"),
  React.createElement("div",{style:{background:"#14120e",border:"1px solid #2a4a5a",padding:"28px 24px",marginBottom:20,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#5a9bbc",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"弁護士・高橋"),"「今日のところはこれで大丈夫です。ただ、正直に言うと、これで終わりではありません。警察は引き続き捜査をしますし、逆恨みでより圧力が強まる可能性もあります。でも、一つ確かなことがあります。今日、あなたは自分の言葉で自分を守った。それは、この国の取調室で最も難しいことです。」"),
  React.createElement("div",{style:{background:"#0f0f0f",border:"1px solid #333",padding:"24px",marginBottom:20,lineHeight:2.2,fontSize:13,color:"#888",borderLeft:"3px solid #555"}},React.createElement("div",{style:{fontWeight:700,color:"#aaa",marginBottom:12}},"── 後日"),"翌週の月曜日。あなたがオフィスで仕事をしていると、スーツ姿の男が二人、受付に現れた。刑事だった。あなたのデスクの周りに、同僚たちの視線が集まる。\n\n「少しお話を…」\n\n上司が会議室を案内する。ドアが閉まる。廊下でひそひそ声が聞こえる。\n\n── 結局、山田さんの事件は、二週間後に別の人物が傷害容疑で逮捕されて解決した。あなたの嫌疑は晴れた。しかし、警察署で一晩中取り調べを受けたこと、職場に刑事が来たことは、同僚たちの記憶から消えることはなかった。"),
  React.createElement("div",{style:{marginTop:32,padding:"24px 20px",background:"#14120e",border:"1px solid #2a4a5a",fontSize:13,lineHeight:2.2,color:"#aaa",fontFamily:"'Noto Sans JP',sans-serif"}},React.createElement("div",{style:{color:"#5a9bbc",fontWeight:700,marginBottom:8}},"供述調書は作成されませんでした。"),"あなたは弁護士の援助を勝ち取り、供述調書への署名を回避しました。しかし、現実には、この「弁護士を呼ぶ」という当たり前の行為が極めて困難であることが、日本の取調べの最大の問題です。参考人段階では当番弁護士制度は使えず、私選弁護人を自費で呼ぶしかない。多くの人はそのことすら知らないまま、取調室に座らされるのです。"),
  statsBlock,
  React.createElement("div",{style:{textAlign:"center",marginTop:32,marginBottom:48}},React.createElement("button",{className:"start-btn",onClick:resetAll},"最初から")))));

  // NORMAL RESULT
  if(phase==="result"){var confession=generateConfession(choiceList,damage);return React.createElement("div",{style:cs},React.createElement("div",{style:rs,className:"fade-in"},React.createElement("div",{style:{paddingTop:32}},React.createElement(StressMeter,{value:damage}),React.createElement("div",{style:{fontSize:11,letterSpacing:4,color:"#c44133",marginBottom:20,fontFamily:"'Noto Sans JP',sans-serif"}},"取調べ終了 ── 供述調書が作成されました"),React.createElement("div",{className:"confession-box"},React.createElement("div",{style:{whiteSpace:"pre-wrap"}},confession),React.createElement(SealStamp,{visible:true})),React.createElement("div",{style:{marginTop:32,padding:"24px 20px",background:"#14120e",border:"1px solid #2a2520",fontSize:13,lineHeight:2.2,color:"#aaa",fontFamily:"'Noto Sans JP',sans-serif"}},damage>=130?React.createElement(React.Fragment,null,React.createElement("div",{style:{color:"#c44133",fontWeight:700,marginBottom:8}},"あなたは「自白」したことになりました。"),"あなたの受け答えの一つひとつが、巧みに文脈を変えられ、あなたが犯人であるかのような供述調書が出来上がりました。これが、密室の取調べで実際に起きていることです。"):damage>=100?React.createElement(React.Fragment,null,React.createElement("div",{style:{color:"#c4a833",fontWeight:700,marginBottom:8}},"あなたはかなり追い詰められました。"),"直接的な自白には至りませんでしたが、供述調書はあなたが犯人であるかのように読める内容になっています。これが実際の裁判で「証拠」として採用されるのです。"):React.createElement(React.Fragment,null,React.createElement("div",{style:{color:"#4a9e5c",fontWeight:700,marginBottom:8}},"あなたは何とか耐えました。"),"しかし、供述調書をよく読んでみてください。否認を続けたこと自体が「不自然」「隠蔽の意図」として記録されています。取調室では、何を言っても、何を言わなくても、不利に使われるのです。")),statsBlock,React.createElement("div",{style:{textAlign:"center",marginTop:32,marginBottom:48}},React.createElement("button",{className:"start-btn",onClick:resetAll},"最初から")))))}

  // GAME
  var interrogatorText=scenario.getInterrogator(state);
  var rawChoices=scenario.getChoices(state);
  var key=qIdx+"-"+lawyerStage+"-"+hostile;
  if(choicesKey.current!==key){shuffledChoices.current=shuffleArray(rawChoices);choicesKey.current=key}

  // Determine next button label
  var nextLabel;
  if(ynPhase!=="none")nextLabel=null; // handled separately
  else if(triggerLawyer)nextLabel="弁護士を待つ";
  else if(qIdx+1>=SCENARIOS.length)nextLabel="供述調書を見る";
  else nextLabel="次へ";

  return React.createElement("div",{style:cs},React.createElement("div",{style:rs,ref:scrollRef},React.createElement("div",{style:{paddingTop:20}},
    React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,paddingBottom:12,borderBottom:"1px solid #222"}},React.createElement("div",{style:{fontSize:11,letterSpacing:3,color:"#666",fontFamily:"'Noto Sans JP',sans-serif"}},"第"+(qIdx+1)+"問 / "+SCENARIOS.length),React.createElement("div",{style:{fontSize:11,color:"#c44133",fontFamily:"'Noto Sans JP',sans-serif"}},"● REC")),
    React.createElement(StressMeter,{value:damage}),
    scenario.scene&&React.createElement("div",{style:{fontSize:13,color:"#777",marginBottom:20,padding:"12px 16px",background:"#111",borderLeft:"2px solid #333",fontFamily:"'Noto Sans JP',sans-serif",lineHeight:1.9}},scenario.scene),
    // Interrogator
    React.createElement("div",{style:{background:"#14120e",border:"1px solid #2a2520",padding:"24px 20px",marginBottom:24,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#c44133",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"取調官"),React.createElement(TypewriterText,{text:interrogatorText,speed:25,onComplete:function(){if(!reaction)setShowChoices(true)}})),
    // Choices
    showChoices&&!reaction&&React.createElement("div",{className:"slide-up"},React.createElement("div",{style:{fontSize:11,color:"#666",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"あなたの応答を選んでください"),shuffledChoices.current.map(function(ch,i){return React.createElement("button",{key:i,className:"choice-btn",onClick:function(){handleChoice(ch)}},React.createElement("div",null,ch.label),React.createElement("div",{style:{fontSize:12,color:"#888",marginTop:4}},"（"+ch.desc+"）"))})),
    // Reaction
    reaction&&ynPhase==="none"&&React.createElement("div",{className:"fade-in",style:{background:"#1a1210",border:"1px solid #3a2520",padding:"24px 20px",marginBottom:24,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#c44133",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"取調官の反応"),React.createElement(TypewriterText,{text:reaction,speed:25,onComplete:function(){setTextDone(true)}})),
    // Next button (only if no Y/N pending)
    reaction&&textDone&&ynPhase==="none"&&React.createElement("div",{style:{textAlign:"center",marginTop:24,marginBottom:40},className:"fade-in"},React.createElement("button",{className:"start-btn",onClick:handleNext},nextLabel)),
    // Y/N Follow-up question
    ynPhase==="question"&&React.createElement("div",{className:"fade-in",style:{background:"#14120e",border:"1px solid #5a3a2a",padding:"24px 20px",marginBottom:24,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#c4a833",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"取調官（続けて）"),React.createElement(TypewriterText,{text:ynText,speed:25,onComplete:function(){setYnTextDone(true)}})),
    // Y/N buttons
    ynPhase==="question"&&ynTextDone&&React.createElement("div",{style:{textAlign:"center",marginTop:20,marginBottom:24},className:"slide-up"},React.createElement("button",{className:"yn-btn",onClick:function(){handleYN(true)}},"はい"),React.createElement("button",{className:"yn-btn",onClick:function(){handleYN(false)}},"いいえ")),
    // Y/N reaction
    ynPhase==="reaction"&&React.createElement("div",{className:"fade-in",style:{background:"#1a1210",border:"1px solid #3a2520",padding:"24px 20px",marginBottom:24,lineHeight:2.2,fontSize:14}},React.createElement("div",{style:{fontSize:11,color:"#c44133",marginBottom:12,letterSpacing:2,fontFamily:"'Noto Sans JP',sans-serif"}},"取調官の反応"),React.createElement(TypewriterText,{text:ynReaction,speed:25,onComplete:function(){setYnReactionDone(true)}})),
    // Next after Y/N
    ynPhase==="reaction"&&ynReactionDone&&React.createElement("div",{style:{textAlign:"center",marginTop:24,marginBottom:40},className:"fade-in"},React.createElement("button",{className:"start-btn",onClick:handleYNNext},triggerLawyer?"弁護士を待つ":qIdx+1>=SCENARIOS.length?(lawyerStage>=2?"弁護士を待つ":"供述調書を見る"):"次へ"))
  )));
}
ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));

</script>
</body>
</html>